#!/bin/bash

# Exit on error
set -e

# Input paths
TRAIN_DATA="data/train"
TEST_DATA="data/test"
TAXA_DATA="data/metadata"

# Parameters
FRAGMENT_SIZE=126
RANK="superkingdom"
N=1000        # total samples
K_MIN=5       # top-k results
NUM_THREADS=8
OUTPUT="ncd_kingdom_output.csv"

# Run NCD pipeline
python NCD.py \
  --train_data "$TRAIN_DATA" \
  --test_data "$TEST_DATA" \
  --taxa_data "$TAXA_DATA" \
  --subsample_mode taxa \
  --fragment_size "$FRAGMENT_SIZE" \
  --rank "$RANK" \
  --N "$N" \
  --save_dataset "data/test_dataset" \
  --k_min "$K_MIN" \
  --num_threads "$NUM_THREADS" \
  --output "$OUTPUT"

